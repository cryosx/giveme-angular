<div id="new_task_form_container">

  <div id="new_task_background"></div>

  <form (ngSubmit)="addTask()" #newTaskForm="ngForm" (click)="cdRef.detectChanges()">
    <h1>Create a new task
      <button type="button" id="new_task_close" (click)="toggleNewTaskModal.emit()">Close</button>

    </h1>

    <div class="form_input_container">
      <mat-form-field>
        <input matInput placeholder="Title" type="text" id="new_task_title" required [(ngModel)]="taskData.title" name="title" #title="ngModel">
      </mat-form-field>
      <div [hidden]="title.valid || title.pristine" class="alert alert_danger">
        Title is required
      </div>


      <mat-form-field>
        <textarea matInput placeholder="Description" name="description" class="form_control" id="new_task_description" required [(ngModel)]="taskData.description"
          name="description" #description="ngModel"></textarea>
      </mat-form-field>
      <div [hidden]="description.valid || description.pristine" class="alert alert_danger">
        Task description is required
      </div>

      <mat-form-field>

        <input matInput [matDatepicker]="picker" placeholder="Expires" id="new_task_expires" required [(ngModel)]="taskData.expires_at"
          name="expires" #expires="ngModel">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <div [hidden]="expires.valid || expires.pristine" class="alert alert_danger">
        Expiration date is required
      </div>

      <mat-form-field>
        <input matInput placeholder="Reward" value="0" type="number" class="form_control" id="new_task_reward" required [(ngModel)]="taskData.reward"
          name="reward" #reward="ngModel">
      </mat-form-field>
      <div [hidden]="reward.valid || reward.pristine" class="alert alert_danger">
        Reward is required
      </div>

      <button type="submit" [disabled]="!newTaskForm.form.valid">Add Task</button>

    </div>
  </form>
</div>
